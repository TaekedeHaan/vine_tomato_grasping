<?xml version="1.0"?>
<launch>
	<!-- Parameters to pass to the ROS node -->
	<arg name="robot_name" 							default="iiwa"/>
	<arg name="manipulator_group_name" 	default="manipulator"/>
  <arg name="ee_group_name"           default="gripper"/>

	<arg name="pipeline_debug"	default="false"/>
	<arg name="object_detection_debug"	default="false"/>
	<arg name="pose_transform_debug"	default="false"/>
	<arg name="move_robot_debug"	default="false"/>
	<arg name="visualize_object_debug"	default="false"/>

	<group ns="$(arg robot_name)">
		<node name="rqt_sdh_grasp"
			pkg="rqt_sdh_grasp"
			type="rqt_sdh_grasp"
			output="screen">
		</node>

		<node name="pipeline"
			pkg="flex_grasp"
			type="smach_pipeline.py"
			output="screen">
			<param name ="debug" value="$(arg pipeline_debug)"/>
		</node>

		<node name="object_detection"
			pkg="flex_grasp"
			type="object_detection.py"
			output="screen">
			<param name ="debug" value="$(arg object_detection_debug)"/>
		</node>

		<node name="pose_transform"
			pkg="flex_grasp"
			type="pose_transform.py"
			output="screen">
			<param name ="debug" value="$(arg object_detection_debug)"/>
		</node>

    <node name="move_robot"
			pkg="flex_grasp"
			type="move_robot.py"
			output="screen">
    	<remap from="/attached_collision_object" to="/$(arg robot_name)/attached_collision_object"/>
    	<remap from="/collision_object" to="/$(arg robot_name)/collision_object"/>
			<param name ="debug" value="$(arg move_robot_debug)"/>
    </node>

		<node pkg="flex_grasp"
			name="visualize_object"
			type="visualize_object.py"
			output="screen">
			<remap from="/attached_collision_object" to="/$(arg robot_name)/attached_collision_object"/>
			<remap from="/collision_object" to="/$(arg robot_name)/collision_object"/>
			<param name ="debug" value="$(arg visualize_object_debug)"/>
		</node>

		<param name="planning_frame" value="/world"/>
		<param name="manipulator_group_name" value="$(arg manipulator_group_name)"/>
		<param name="ee_group_name" value="$(arg ee_group_name)"/>
	</group>
</launch>
